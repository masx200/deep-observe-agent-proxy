{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\r\nconst { apply, construct, defineProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback invalid !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let forkobj;\r\n        if (isobject(target)) {\r\n            forkobj = {};\r\n        }\r\n        else {\r\n            forkobj = () => { };\r\n        }\r\n        setPrototypeOf(forkobj, null);\r\n        return (forkobj => {\r\n            return new Proxy(forkobj, {\r\n                defineProperty(t, p, a) {\r\n                    return defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, get(target, p));\r\n                    return Reflect.deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return Reflect.ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = getOwnPropertyDescriptor(target, k);\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, get(target, k));\r\n                    }\r\n                    return set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(forkobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback is not valid function !\");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        throw Error(\"Proxy unsupported!\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\n\nexport default observedeepagent;\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","apply","construct","defineProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","set","setPrototypeOf","isobject","a","isfunction","target","callback","Error","Proxy","deepobserveaddpath","patharray","ancestor","forkobj","t","p","deleteProperty","undefined","ownKeys","v","[object Object]","argumentslist","thisarg","argarray","k","descripter","configurable","value"],"mappings":"AAAA,MAAMA,EAAUC,OAAOD,SACjBE,MAAEA,EAAKC,UAAEA,EAASC,eAAEA,EAAcC,IAAEA,EAAGC,yBAAEA,EAAwBC,eAAEA,EAAcC,IAAEA,EAAGC,IAAEA,EAAGC,eAAEA,GAAmBV,EACtH,SAASW,EAASC,GACd,MAAoB,iBAANA,GAAwB,OAANA,EAEpC,SAASC,EAAWD,GAChB,MAAoB,mBAANA,iBA8ElB,SAA0BE,EAAQC,GAC9B,GAAwB,mBAAbA,EACP,MAAMC,MAAM,4CAEhB,GAAqB,mBAAVC,MACP,MAAMD,MAAM,sBAEhB,OAAIH,EAAWC,IAAWH,EAASG,GAnFvC,SAASI,EAAmBJ,EAAQC,EAAUI,EAAY,GAAIC,EAAWN,GACrE,GAAwB,mBAAbC,EACP,MAAMC,MAAM,8BAEhB,GAAIH,EAAWC,IAAWH,EAASG,GAAS,CACxC,IAAIO,EAQJ,OANIA,EADAV,EAASG,GACC,GAGA,OAEdJ,EAAeW,EAAS,MACjB,CAACA,GACG,IAAIJ,MAAMI,EAAS,CACtBjB,eAAc,CAACkB,EAAGC,EAAGX,IACVR,EAAeU,EAAQS,EAAGX,GAErCY,eAAc,CAACF,EAAGC,KACdR,EAASK,EAAU,IAAID,EAAWI,QAAIE,EAAWpB,EAAIS,EAAQS,IACtDvB,EAAQwB,eAAeV,EAAQS,IAE1CG,QAAO,IACI1B,EAAQ0B,QAAQZ,GAE3BN,IAAG,CAACc,EAAGC,IACIf,EAAIM,EAAQS,GAEvBhB,eAAc,IACHA,EAAeO,GAE1BJ,eAAc,CAACY,EAAGK,IACPjB,EAAeI,EAAQa,GAElCC,UAAUN,EAAGO,GACT,GAAsB,mBAAXf,EACP,OAAOX,EAAUW,EAAQe,IAGjCD,MAAMN,EAAGQ,EAASC,GACd,GAAsB,mBAAXjB,EACP,OAAOZ,EAAMY,EAAQgB,EAASC,IAGtCH,yBAAyBN,EAAGU,GACxB,IAAIC,EAAa3B,EAAyBQ,EAAQkB,GAClD,OAAIC,GACAA,EAAWC,cAAe,EACnBD,QAGP,GAGRxB,IAAG,CAACa,EAAGU,EAAGL,KACkB,mBAAbZ,GACPA,EAASK,EAAU,IAAID,EAAWa,GAAIL,EAAGtB,EAAIS,EAAQkB,IAElDvB,EAAIK,EAAQkB,EAAGL,IAE1BC,IAAIN,EAAGU,GACH,IAAIG,EAAQ9B,EAAIS,EAAQkB,GACxB,OAAInB,EAAWsB,IAAUxB,EAASwB,GACvBjB,EAAmBiB,EAAOpB,EAAU,IAAII,EAAWa,GAAIlB,GAGvDqB,KArDhB,CAyDJd,GAGH,OAAOP,EAWAI,CAAmBJ,EAAQC,EAAU,GAAID,GAGzCA"}