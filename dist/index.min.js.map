{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["function isArray(a) {\r\n    return Array.isArray(a);\r\n}\r\nconst Reflect = window.Reflect;\r\nconst { ownKeys, deleteProperty, apply, construct, defineProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback invalid !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let fakeobj;\r\n        if (isArray(target)) {\r\n            fakeobj = [];\r\n        }\r\n        else if (isfunction(target)) {\r\n            fakeobj = () => { };\r\n        }\r\n        else {\r\n            fakeobj = {};\r\n        }\r\n        setPrototypeOf(fakeobj, null);\r\n        return (fakeobj => {\r\n            return new Proxy(fakeobj, {\r\n                defineProperty(t, p, a) {\r\n                    return defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, get(target, p));\r\n                    return deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = getOwnPropertyDescriptor(target, k);\r\n                    if (isArray(target) && k === \"length\") {\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        if (descripter) {\r\n                            descripter.configurable = true;\r\n                            return descripter;\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, get(target, k));\r\n                    }\r\n                    return set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(fakeobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback  invalid function \");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        throw Error(\"Proxy unsupported!\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\n\nexport default observedeepagent;\n//# sourceMappingURL=index.js.map\n"],"names":["isArray","a","Array","Reflect","window","ownKeys","deleteProperty","apply","construct","defineProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","set","setPrototypeOf","isobject","isfunction","target","callback","Error","Proxy","deepobserveaddpath","patharray","ancestor","fakeobj","t","p","undefined","v","[object Object]","argumentslist","thisarg","argarray","k","descripter","configurable","value"],"mappings":"AAAA,SAASA,EAAQC,GACb,OAAOC,MAAMF,QAAQC,GAEzB,MAAME,EAAUC,OAAOD,SACjBE,QAAEA,EAAOC,eAAEA,EAAcC,MAAEA,EAAKC,UAAEA,EAASC,eAAEA,EAAcC,IAAEA,EAAGC,yBAAEA,EAAwBC,eAAEA,EAAcC,IAAEA,EAAGC,IAAEA,EAAGC,eAAEA,GAAmBZ,EAC/I,SAASa,EAASf,GACd,MAAoB,iBAANA,GAAwB,OAANA,EAEpC,SAASgB,EAAWhB,GAChB,MAAoB,mBAANA,iBAsFlB,SAA0BiB,EAAQC,GAC9B,GAAwB,mBAAbA,EACP,MAAMC,MAAM,uCAEhB,GAAqB,mBAAVC,MACP,MAAMD,MAAM,sBAEhB,OAAIH,EAAWC,IAAWF,EAASE,GA3FvC,SAASI,EAAmBJ,EAAQC,EAAUI,EAAY,GAAIC,EAAWN,GACrE,GAAwB,mBAAbC,EACP,MAAMC,MAAM,8BAEhB,GAAIH,EAAWC,IAAWF,EAASE,GAAS,CACxC,IAAIO,EAWJ,OATIA,EADAzB,EAAQkB,GACE,GAELD,EAAWC,GACN,OAGA,GAEdH,EAAeU,EAAS,MACjB,CAACA,GACG,IAAIJ,MAAMI,EAAS,CACtBhB,eAAc,CAACiB,EAAGC,EAAG1B,IACVQ,EAAeS,EAAQS,EAAG1B,GAErCK,eAAc,CAACoB,EAAGC,KACdR,EAASK,EAAU,IAAID,EAAWI,QAAIC,EAAWlB,EAAIQ,EAAQS,IACtDrB,EAAeY,EAAQS,IAElCtB,QAAO,IACIA,EAAQa,GAEnBL,IAAG,CAACa,EAAGC,IACId,EAAIK,EAAQS,GAEvBf,eAAc,IACHA,EAAeM,GAE1BH,eAAc,CAACW,EAAGG,IACPd,EAAeG,EAAQW,GAElCC,UAAUJ,EAAGK,GACT,GAAsB,mBAAXb,EACP,OAAOV,EAAUU,EAAQa,IAGjCD,MAAMJ,EAAGM,EAASC,GACd,GAAsB,mBAAXf,EACP,OAAOX,EAAMW,EAAQc,EAASC,IAGtCH,yBAAyBJ,EAAGQ,GACxB,IAAIC,EAAaxB,EAAyBO,EAAQgB,GAClD,OAAIlC,EAAQkB,IAAiB,WAANgB,EACZC,EAGHA,GACAA,EAAWC,cAAe,EACnBD,QAGP,GAIZrB,IAAG,CAACY,EAAGQ,EAAGL,KACkB,mBAAbV,GACPA,EAASK,EAAU,IAAID,EAAWW,GAAIL,EAAGnB,EAAIQ,EAAQgB,IAElDpB,EAAII,EAAQgB,EAAGL,IAE1BC,IAAIJ,EAAGQ,GACH,IAAIG,EAAQ3B,EAAIQ,EAAQgB,GACxB,OAAIjB,EAAWoB,IAAUrB,EAASqB,GACvBf,EAAmBe,EAAOlB,EAAU,IAAII,EAAWW,GAAIhB,GAGvDmB,KA1DhB,CA8DJZ,GAGH,OAAOP,EAWAI,CAAmBJ,EAAQC,EAAU,GAAID,GAGzCA"}