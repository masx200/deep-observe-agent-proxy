{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\r\nconst { ownKeys, deleteProperty, apply, construct, defineProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback invalid !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let fakeobj;\r\n        if (Array.isArray(target)) {\r\n            fakeobj = [];\r\n        }\r\n        else if (isfunction(target)) {\r\n            fakeobj = () => { };\r\n        }\r\n        else {\r\n            fakeobj = {};\r\n        }\r\n        setPrototypeOf(fakeobj, null);\r\n        return (fakeobj => {\r\n            return new Proxy(fakeobj, {\r\n                defineProperty(t, p, a) {\r\n                    return defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, get(target, p));\r\n                    return deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = getOwnPropertyDescriptor(target, k);\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, get(target, k));\r\n                    }\r\n                    return set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(fakeobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback  invalid function \");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        throw Error(\"Proxy unsupported!\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\n\nexport default observedeepagent;\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","ownKeys","deleteProperty","apply","construct","defineProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","set","setPrototypeOf","isobject","a","isfunction","target","callback","Error","Proxy","deepobserveaddpath","patharray","ancestor","fakeobj","Array","isArray","t","p","undefined","v","[object Object]","argumentslist","thisarg","argarray","k","descripter","configurable","value"],"mappings":"AAAA,MAAMA,EAAUC,OAAOD,SACjBE,QAAEA,EAAOC,eAAEA,EAAcC,MAAEA,EAAKC,UAAEA,EAASC,eAAEA,EAAcC,IAAEA,EAAGC,yBAAEA,EAAwBC,eAAEA,EAAcC,IAAEA,EAAGC,IAAEA,EAAGC,eAAEA,GAAmBZ,EAC/I,SAASa,EAASC,GACd,MAAoB,iBAANA,GAAwB,OAANA,EAEpC,SAASC,EAAWD,GAChB,MAAoB,mBAANA,iBAiFlB,SAA0BE,EAAQC,GAC9B,GAAwB,mBAAbA,EACP,MAAMC,MAAM,uCAEhB,GAAqB,mBAAVC,MACP,MAAMD,MAAM,sBAEhB,OAAIH,EAAWC,IAAWH,EAASG,GAtFvC,SAASI,EAAmBJ,EAAQC,EAAUI,EAAY,GAAIC,EAAWN,GACrE,GAAwB,mBAAbC,EACP,MAAMC,MAAM,8BAEhB,GAAIH,EAAWC,IAAWH,EAASG,GAAS,CACxC,IAAIO,EAWJ,OATIA,EADAC,MAAMC,QAAQT,GACJ,GAELD,EAAWC,GACN,OAGA,GAEdJ,EAAeW,EAAS,MACjB,CAACA,GACG,IAAIJ,MAAMI,EAAS,CACtBjB,eAAc,CAACoB,EAAGC,EAAGb,IACVR,EAAeU,EAAQW,EAAGb,GAErCX,eAAc,CAACuB,EAAGC,KACdV,EAASK,EAAU,IAAID,EAAWM,QAAIC,EAAWrB,EAAIS,EAAQW,IACtDxB,EAAea,EAAQW,IAElCzB,QAAO,IACIA,EAAQc,GAEnBN,IAAG,CAACgB,EAAGC,IACIjB,EAAIM,EAAQW,GAEvBlB,eAAc,IACHA,EAAeO,GAE1BJ,eAAc,CAACc,EAAGG,IACPjB,EAAeI,EAAQa,GAElCC,UAAUJ,EAAGK,GACT,GAAsB,mBAAXf,EACP,OAAOX,EAAUW,EAAQe,IAGjCD,MAAMJ,EAAGM,EAASC,GACd,GAAsB,mBAAXjB,EACP,OAAOZ,EAAMY,EAAQgB,EAASC,IAGtCH,yBAAyBJ,EAAGQ,GACxB,IAAIC,EAAa3B,EAAyBQ,EAAQkB,GAClD,OAAIC,GACAA,EAAWC,cAAe,EACnBD,QAGP,GAGRxB,IAAG,CAACe,EAAGQ,EAAGL,KACkB,mBAAbZ,GACPA,EAASK,EAAU,IAAID,EAAWa,GAAIL,EAAGtB,EAAIS,EAAQkB,IAElDvB,EAAIK,EAAQkB,EAAGL,IAE1BC,IAAIJ,EAAGQ,GACH,IAAIG,EAAQ9B,EAAIS,EAAQkB,GACxB,OAAInB,EAAWsB,IAAUxB,EAASwB,GACvBjB,EAAmBiB,EAAOpB,EAAU,IAAII,EAAWa,GAAIlB,GAGvDqB,KArDhB,CAyDJd,GAGH,OAAOP,EAWAI,CAAmBJ,EAAQC,EAAU,GAAID,GAGzCA"}