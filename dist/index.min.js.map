{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect = window.Reflect;\r\nconst { apply, construct, defineProperty, deleteProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, isExtensible, ownKeys, preventExtensions, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback invalid !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let forkobj;\r\n        if (isobject(target)) {\r\n            forkobj = {};\r\n        }\r\n        else {\r\n            forkobj = () => { };\r\n        }\r\n        setPrototypeOf(forkobj, null);\r\n        return (forkobj => {\r\n            return new Proxy(forkobj, {\r\n                defineProperty(t, p, a) {\r\n                    return defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, get(target, p));\r\n                    return Reflect.deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return Reflect.ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = getOwnPropertyDescriptor(target, k);\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, get(target, k));\r\n                    }\r\n                    return set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(forkobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback is not valid function !\");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        throw Error(\"Proxy unsupported!\");\r\n        return target;\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\n\nexport default observedeepagent;\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect","window","apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf","isobject","a","isfunction","target","callback","Error","Proxy","deepobserveaddpath","patharray","ancestor","forkobj","t","p","undefined","v","[object Object]","argumentslist","thisarg","argarray","k","descripter","configurable","value"],"mappings":"AAAA,MAAMA,EAAUC,OAAOD,SACjBE,MAAEA,EAAKC,UAAEA,EAASC,eAAEA,EAAcC,eAAEA,EAAcC,IAAEA,EAAGC,yBAAEA,EAAwBC,eAAEA,EAAcC,IAAEA,EAAGC,aAAEA,EAAYC,QAAEA,EAAOC,kBAAEA,EAAiBC,IAAEA,EAAGC,eAAEA,GAAmBd,EAChL,SAASe,EAASC,GACd,MAAoB,iBAANA,GAAwB,OAANA,EAEpC,SAASC,EAAWD,GAChB,MAAoB,mBAANA,iBA8ElB,SAA0BE,EAAQC,GAC9B,GAAwB,mBAAbA,EACP,MAAMC,MAAM,4CAEhB,GAAqB,mBAAVC,MACP,MAAMD,MAAM,sBAGhB,OAAIH,EAAWC,IAAWH,EAASG,GApFvC,SAASI,EAAmBJ,EAAQC,EAAUI,EAAY,GAAIC,EAAWN,GACrE,GAAwB,mBAAbC,EACP,MAAMC,MAAM,8BAEhB,GAAIH,EAAWC,IAAWH,EAASG,GAAS,CACxC,IAAIO,EAQJ,OANIA,EADAV,EAASG,GACC,GAGA,OAEdJ,EAAeW,EAAS,MACjB,CAACA,GACG,IAAIJ,MAAMI,EAAS,CACtBrB,eAAc,CAACsB,EAAGC,EAAGX,IACVZ,EAAec,EAAQS,EAAGX,GAErCX,eAAc,CAACqB,EAAGC,KACdR,EAASK,EAAU,IAAID,EAAWI,QAAIC,EAAWtB,EAAIY,EAAQS,IACtD3B,EAAQK,eAAea,EAAQS,IAE1ChB,QAAO,IACIX,EAAQW,QAAQO,GAE3BT,IAAG,CAACiB,EAAGC,IACIlB,EAAIS,EAAQS,GAEvBnB,eAAc,IACHA,EAAeU,GAE1BJ,eAAc,CAACY,EAAGG,IACPf,EAAeI,EAAQW,GAElCC,UAAUJ,EAAGK,GACT,GAAsB,mBAAXb,EACP,OAAOf,EAAUe,EAAQa,IAGjCD,MAAMJ,EAAGM,EAASC,GACd,GAAsB,mBAAXf,EACP,OAAOhB,EAAMgB,EAAQc,EAASC,IAGtCH,yBAAyBJ,EAAGQ,GACxB,IAAIC,EAAa5B,EAAyBW,EAAQgB,GAClD,OAAIC,GACAA,EAAWC,cAAe,EACnBD,QAGP,GAGRtB,IAAG,CAACa,EAAGQ,EAAGL,KACkB,mBAAbV,GACPA,EAASK,EAAU,IAAID,EAAWW,GAAIL,EAAGvB,EAAIY,EAAQgB,IAElDrB,EAAIK,EAAQgB,EAAGL,IAE1BC,IAAIJ,EAAGQ,GACH,IAAIG,EAAQ/B,EAAIY,EAAQgB,GACxB,OAAIjB,EAAWoB,IAAUtB,EAASsB,GACvBf,EAAmBe,EAAOlB,EAAU,IAAII,EAAWW,GAAIhB,GAGvDmB,KArDhB,CAyDJZ,GAGH,OAAOP,EAYAI,CAAmBJ,EAAQC,EAAU,GAAID,GAGzCA"}