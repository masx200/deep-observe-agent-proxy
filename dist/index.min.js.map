{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["function isArray(a) {\r\n    return Array.isArray(a);\r\n}\r\nconst Reflect = window.Reflect;\r\nconst { ownKeys, deleteProperty, apply, construct, defineProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (!isfunction(callback)) {\r\n        console.error(callback);\r\n        console.error(\"observe callback invalid !\");\r\n        throw Error();\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let fakeobj;\r\n        if (isArray(target)) {\r\n            fakeobj = [];\r\n        }\r\n        else if (isfunction(target)) {\r\n            fakeobj = (() => { });\r\n        }\r\n        else {\r\n            fakeobj = {};\r\n        }\r\n        setPrototypeOf(fakeobj, null);\r\n        return new Proxy(fakeobj, {\r\n            defineProperty(t, p, a) {\r\n                callback(ancestor, [...patharray, String(p)], has(a, \"value\") ? a.value : isfunction(a.get) ? a.get() : undefined, get(target, p));\r\n                return defineProperty(target, p, a);\r\n            },\r\n            deleteProperty(t, p) {\r\n                callback(ancestor, [...patharray, String(p)], undefined, get(target, p));\r\n                return deleteProperty(target, p);\r\n            },\r\n            ownKeys() {\r\n                return ownKeys(target);\r\n            },\r\n            has(t, p) {\r\n                return has(target, p);\r\n            },\r\n            getPrototypeOf() {\r\n                return getPrototypeOf(target);\r\n            },\r\n            setPrototypeOf(t, v) {\r\n                return setPrototypeOf(target, v);\r\n            },\r\n            construct(t, argumentslist) {\r\n                if (isfunction(target)) {\r\n                    return construct(target, argumentslist);\r\n                }\r\n            },\r\n            apply(t, thisarg, argarray) {\r\n                if (isfunction(target)) {\r\n                    return apply(target, thisarg, argarray);\r\n                }\r\n            },\r\n            getOwnPropertyDescriptor(t, k) {\r\n                var descripter = getOwnPropertyDescriptor(target, k);\r\n                if (isArray(target) && k === \"length\") {\r\n                    return descripter;\r\n                }\r\n                else {\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                }\r\n            },\r\n            set(t, k, v) {\r\n                if (isfunction(callback)) {\r\n                    callback(ancestor, [...patharray, String(k)], v, get(target, k));\r\n                }\r\n                return set(target, k, v);\r\n            },\r\n            get(t, k) {\r\n                var value = get(target, k);\r\n                if (isfunction(value) || isobject(value)) {\r\n                    return deepobserveaddpath(value, callback, [...patharray, String(k)], target);\r\n                }\r\n                else {\r\n                    return value;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (!isfunction(callback)) {\r\n        console.error(callback);\r\n        console.error(\"observe callback  invalid function !\");\r\n        throw Error();\r\n    }\r\n    if (!isfunction(Proxy)) {\r\n        console.error(\"Proxy unsupported!\");\r\n        throw Error();\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\n\nexport default observedeepagent;\n//# sourceMappingURL=index.js.map\n"],"names":["isArray","a","Array","Reflect","window","ownKeys","deleteProperty","apply","construct","defineProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","set","setPrototypeOf","isobject","isfunction","target","callback","Error","Proxy","deepobserveaddpath","patharray","ancestor","fakeobj","t","p","String","value","undefined","v","[object Object]","argumentslist","thisarg","argarray","k","descripter","configurable"],"mappings":"AAAA,SAASA,EAAQC,GACb,OAAOC,MAAMF,QAAQC,GAEzB,MAAME,EAAUC,OAAOD,SACjBE,QAAEA,EAAOC,eAAEA,EAAcC,MAAEA,EAAKC,UAAEA,EAASC,eAAEA,EAAcC,IAAEA,EAAGC,yBAAEA,EAAwBC,eAAEA,EAAcC,IAAEA,EAAGC,IAAEA,EAAGC,eAAEA,GAAmBZ,EAC/I,SAASa,EAASf,GACd,MAAoB,iBAANA,GAAwB,OAANA,EAEpC,SAASgB,EAAWhB,GAChB,MAAoB,mBAANA,iBAuFlB,SAA0BiB,EAAQC,GAC9B,IAAKF,EAAWE,GAGZ,MAAMC,QAEV,IAAKH,EAAWI,OAEZ,MAAMD,QAEV,OAAIH,EAAWC,IAAWF,EAASE,GA/FvC,SAASI,EAAmBJ,EAAQC,EAAUI,EAAY,GAAIC,EAAWN,GACrE,IAAKD,EAAWE,GAGZ,MAAMC,QAEV,GAAIH,EAAWC,IAAWF,EAASE,GAAS,CACxC,IAAIO,EAWJ,OATIA,EADAzB,EAAQkB,GACE,GAELD,EAAWC,UAIN,GAEdH,EAAeU,EAAS,MACjB,IAAIJ,MAAMI,EAAS,CACtBhB,eAAc,CAACiB,EAAGC,EAAG1B,KACjBkB,EAASK,EAAU,IAAID,EAAWK,OAAOD,IAAKd,EAAIZ,EAAG,SAAWA,EAAE4B,MAAQZ,EAAWhB,EAAES,KAAOT,EAAES,WAAQoB,EAAWpB,EAAIQ,EAAQS,IACxHlB,EAAeS,EAAQS,EAAG1B,IAErCK,eAAc,CAACoB,EAAGC,KACdR,EAASK,EAAU,IAAID,EAAWK,OAAOD,SAAKG,EAAWpB,EAAIQ,EAAQS,IAC9DrB,EAAeY,EAAQS,IAElCtB,QAAO,IACIA,EAAQa,GAEnBL,IAAG,CAACa,EAAGC,IACId,EAAIK,EAAQS,GAEvBf,eAAc,IACHA,EAAeM,GAE1BH,eAAc,CAACW,EAAGK,IACPhB,EAAeG,EAAQa,GAElCC,UAAUN,EAAGO,GACT,GAAIhB,EAAWC,GACX,OAAOV,EAAUU,EAAQe,IAGjCD,MAAMN,EAAGQ,EAASC,GACd,GAAIlB,EAAWC,GACX,OAAOX,EAAMW,EAAQgB,EAASC,IAGtCH,yBAAyBN,EAAGU,GACxB,IAAIC,EAAa1B,EAAyBO,EAAQkB,GAClD,OAAIpC,EAAQkB,IAAiB,WAANkB,EACZC,EAGHA,GACAA,EAAWC,cAAe,EACnBD,QAGP,GAIZvB,IAAG,CAACY,EAAGU,EAAGL,KACFd,EAAWE,IACXA,EAASK,EAAU,IAAID,EAAWK,OAAOQ,IAAKL,EAAGrB,EAAIQ,EAAQkB,IAE1DtB,EAAII,EAAQkB,EAAGL,IAE1BC,IAAIN,EAAGU,GACH,IAAIP,EAAQnB,EAAIQ,EAAQkB,GACxB,OAAInB,EAAWY,IAAUb,EAASa,GACvBP,EAAmBO,EAAOV,EAAU,IAAII,EAAWK,OAAOQ,IAAKlB,GAG/DW,KAMnB,OAAOX,EAcAI,CAAmBJ,EAAQC,GAG3BD"}